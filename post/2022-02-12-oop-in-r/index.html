<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>OOP in R | Nikita Gusarov</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="In previous publications we have seen how to create a package with R: (1) the project’s structure generation, (2) the unit tests and their automation and (3) the documentation management. Now its time to dive deeper into programming with R. Today we are going to explore how one can use Object Oriented Programming (OOP) paradigm in R.
There exist multiple object types and programming conventions, each with a particular idea behind it.">
    <meta name="generator" content="Hugo 0.87.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    
      

    

    
    
    <meta property="og:title" content="OOP in R" />
<meta property="og:description" content="In previous publications we have seen how to create a package with R: (1) the project’s structure generation, (2) the unit tests and their automation and (3) the documentation management. Now its time to dive deeper into programming with R. Today we are going to explore how one can use Object Oriented Programming (OOP) paradigm in R.
There exist multiple object types and programming conventions, each with a particular idea behind it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nikitagusarov.github.io/post/2022-02-12-oop-in-r/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-12T00:00:00+00:00" /><meta property="og:site_name" content="Nikita Gusarov" />

<meta itemprop="name" content="OOP in R">
<meta itemprop="description" content="In previous publications we have seen how to create a package with R: (1) the project’s structure generation, (2) the unit tests and their automation and (3) the documentation management. Now its time to dive deeper into programming with R. Today we are going to explore how one can use Object Oriented Programming (OOP) paradigm in R.
There exist multiple object types and programming conventions, each with a particular idea behind it."><meta itemprop="datePublished" content="2022-02-12T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-02-12T00:00:00+00:00" />
<meta itemprop="wordCount" content="2014">
<meta itemprop="keywords" content="Programming,R,OOP,Objects," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OOP in R"/>
<meta name="twitter:description" content="In previous publications we have seen how to create a package with R: (1) the project’s structure generation, (2) the unit tests and their automation and (3) the documentation management. Now its time to dive deeper into programming with R. Today we are going to explore how one can use Object Oriented Programming (OOP) paradigm in R.
There exist multiple object types and programming conventions, each with a particular idea behind it."/>

	<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
});
</script>

<script async type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body class="ma0 courrier bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://nikitagusarov.github.io/images/oop-0.png');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Nikita Gusarov
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/background" title="Background page">
              Background
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="" title="Activities page">
              Activities
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="" title="activities page">
              activities
            </a>
          </li>
          
        </ul>
      
      







<a href="https://linkedin.com/in/nikitagusarov" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/nikitagusarov" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://gitlab.com/nikitagusarov" target="_blank" class="link-transition gitlab link dib z-999 pt3 pt0-l mr1" title="Gitlab link" rel="noopener" aria-label="follow on Gitlab——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M29.782 199.732L256 493.714 8.074 309.699c-6.856-5.142-9.712-13.996-7.141-21.993l28.849-87.974zm75.405-174.806c-3.142-8.854-15.709-8.854-18.851 0L29.782 199.732h131.961L105.187 24.926zm56.556 174.806L256 493.714l94.257-293.982H161.743zm349.324 87.974l-28.849-87.974L256 493.714l247.926-184.015c6.855-5.142 9.711-13.996 7.141-21.993zm-85.404-262.78c-3.142-8.854-15.709-8.854-18.851 0l-56.555 174.806h131.961L425.663 24.926z"></path></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">OOP in R</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://nikitagusarov.github.io/post/2022-02-12-oop-in-r/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://nikitagusarov.github.io/post/2022-02-12-oop-in-r/&amp;text=OOP%20in%20R" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nikitagusarov.github.io/post/2022-02-12-oop-in-r/&amp;title=OOP%20in%20R" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">OOP in R</h1>
      
      <p class="tracked">
          By <strong>
          
              Nikita Gusarov
          
          </strong>
      </p>
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-02-12T00:00:00Z">February 12, 2022</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy courrier bg-near-white f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
<script src="https://nikitagusarov.github.io/post/2022-02-12-oop-in-r/index_files/header-attrs/header-attrs.js"></script>


<p>In previous publications we have seen how to create a package with <em>R</em>:
(1) the project’s structure generation,
(2) the unit tests and their automation and
(3) the documentation management.
Now its time to dive deeper into programming with <em>R</em>.
Today we are going to explore how one can use <a href="https://en.wikipedia.org/wiki/Object-oriented_programming"><em>Object Oriented Programming</em></a> (OOP) paradigm in <em>R</em>.</p>
<p>There exist multiple object types and programming conventions, each with a particular idea behind it.
In this post we are going to explore their differences and see when each of them is more appropriate.</p>
<div id="what-is-oop" class="section level2">
<h2>What is OOP?</h2>
<p>The first reference that comes in mind for discovering the OOP term definition is probably <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">this webpage</a>:</p>
<blockquote>
<p><strong>Object-oriented programming (OOP)</strong> is a programming paradigm based on the concept of “objects”, which can contain data and code:
data in the form of fields (often known as attributes or properties), and code, in the form of procedures (often known as methods).</p>
</blockquote>
<p>One of the features of OOP approach is that the object’s methods (or procedures) can modify the object itself.</p>
<p>The close alternatives to OOP are the <a href="https://en.wikipedia.org/wiki/Imperative_programming">imperative</a> and <a href="https://en.wikipedia.org/wiki/Procedural_programming">procedural</a> programming paradigms.
Let’s see what are their features:</p>
<blockquote>
<p><strong>Imperative programming</strong> is a programming paradigm that uses <em>statements that change a program’s state</em>
… an imperative program consists of commands for the computer to perform.</p>
</blockquote>
<blockquote>
<p><strong>Procedural programming</strong> is a programming paradigm, derived from imperative programming, based on the concept of the <em>procedure call</em>.
Procedures (a type of routine or subroutine) simply contain a series of computational steps to be carried out.</p>
</blockquote>
<p>Both of the paradigms are rather close.
While the imperative programming focuses on describing how a program operates, the procedural counterpart goes further into detail.
The OOP may be considered as even more advanced development of the procedural paradigm, where the objects and their methods may be used across different programs.</p>
<p>In <em>R</em> the average user rarely goes further than simple <a href="https://en.wikipedia.org/wiki/Functional_programming">functional programming</a>.
This programming paradigm opposes the common idea for previously described paradigms in assuming that the objects are immutable and the functions simply map the values to them:</p>
<blockquote>
<p><strong>Functional programming</strong> is a programming paradigm where programs are constructed by applying and composing functions.
It is a declarative programming paradigm in which function definitions are trees of expressions that map values to other values, rather than a sequence of imperative statements which update the running state of the program.</p>
</blockquote>
<p>Once we’ve got at least some basic ideas about the different programming paradigms, let’s explore how we can implement at least several of them with <em>R</em>.</p>
</div>
<div id="what-are-available-alternatives" class="section level2">
<h2>What are available alternatives?</h2>
<p>There exist several object-oriented (OO) systems implemented within <em>R</em>.
In all of them, a <em>class</em> determines the behaviour of <em>objects</em> depending on their <em>attributes</em> and their interactions with <em>other objects</em>.
The <em>class</em> may also define some <em>methods</em> (functions), which behave differently depending on the <em>object</em>’s class.</p>
<p>A good example of how it works are the default <em>R</em> functions (actually <em>methods</em>), that are known to anyone: <code>plot()</code> or <code>summary()</code>.
As you might have notices, these functions provide different output depending on the input’s <code>class</code>.
Many packages that introduce new objects into <em>R</em> add the support for these default methods to their custom classes.
A more advanced reading material may be found <a href="http://adv-r.had.co.nz/OO-essentials.html">here</a>.</p>
<p>The default <em>R</em> system is not exactly OO.
But as everything in <em>R</em> is actually an object we can include it here.
historically <em>R</em> was a language for statistical programming, which did not require a complete OOP support.
Here it is, incorporating all the basic <em>R</em> objects:</p>
<ul>
<li><strong>Base Types</strong> uses the <code>C</code>-level types, that are then used by other OO systems.
To manipulate these types one will have to know <code>C</code> language.</li>
</ul>
<p>In general, there exists 3(4) OO systems:</p>
<ul>
<li><strong>S3</strong>, which proposes a generic-function OO.
This system is actually a minor to functional programming, because it uses <em>generic function</em> wrappers to decide which methods to call on a given object.</li>
<li><strong>S4</strong> is a more formal extension to <strong>S3</strong>.
It introduces the <em>formal class definition</em>, which brings clear class descriptions and inheritance.
The <strong>S4</strong> system supports the multiple dispatch, allowing functions to select appropriate methods as in <strong>S3</strong>.</li>
<li><strong>RC</strong> (or <strong>R5</strong>) is the first system to implement <em>message-passing OO</em> built on top of <strong>S4</strong>, which is more traditional for OOP.
Here we can use <code>$</code> to separate objects and methods as <code>.</code> is used in <em>Python</em>.
It’s equally the first system to introduce <em>mutable objects</em>, meaning the objects are modified in place, instead of the traditional <em>R</em> policy of <em>copy-on-modify</em>.
This particular property makes this system particularly efficient when bringing memory efficiency into your code.</li>
<li><a href="https://r6.r-lib.org/"><strong>R6</strong></a> (which superseeded <strong>RC</strong>) is an <em>encapsulated OOP</em> system for <em>R</em>.
It is the closest to the traditional understanding of the classical OOP:
the objects have reference semantics, there is inheritance between packages and classes have both public and private members.</li>
</ul>
<p>Now, once all the key OO systems are described, we can attempt to illustrate the differences on several examples.</p>
<div id="s3-system" class="section level3">
<h3>S3 system</h3>
<p>The <strong>S3</strong> support is implemented in the core <em>R</em> and does not require any additional packages.
Assuming we want to create an object, which will be used to describe individual for choice situations simulation, we can run:</p>
<pre class="r"><code># Individual object
ind = list(
    characteristics = c(&quot;Age&quot;, &quot;Income&quot;),
    values = c(30, 2.1)
)
# Assign class
class(ind) = &quot;individual&quot;</code></pre>
<p>Once our custom class assigned, we can add corresponding <em>method</em> to a <em>generic function</em> for our class:</p>
<pre class="r"><code># Add summary method for generic function
summary.individual = function(ind) {
    for (i in seq_along(ind$characteristics)) {
        cat(
            &quot;Individual&#39;s &quot;, 
            ind$characteristics[i],
            &quot; is &quot;, 
            ind$values[i],
            &quot;\n&quot;
        )
    }
}

# Apply method to our S3 object
summary(ind)</code></pre>
<pre><code>## Individual&#39;s  Age  is  30 
## Individual&#39;s  Income  is  2.1</code></pre>
<p>Here we observe how the new method for our <code>individual</code> class was added to <code>summary()</code> default function.
The same procedure can be applied to any function.</p>
<p>Now we should make a little point about method inheritance.
Imagine we redefine the class of our individual as follows:</p>
<pre class="r"><code># Update class
class(ind) = c(&quot;teacher&quot;, &quot;individual&quot;)</code></pre>
<p>Now, when we will call a function on an object with several classes specified, <em>R</em> will search available methods for the given classes and choose one respecting their priority.
Meaning that right now, as there exists no method for <code>teacher</code> class in <code>summary()</code>, <em>R</em> will fall back to a method for other available class <code>individual</code>:</p>
<pre class="r"><code># Apply method to our S3 object
summary(ind)</code></pre>
<pre><code>## Individual&#39;s  Age  is  30 
## Individual&#39;s  Income  is  2.1</code></pre>
<p>After adding the respecting method for <code>teacher</code> class and re-execute the function:</p>
<pre class="r"><code># Define another method
summary.teacher = function(ind) {
    for (i in seq_along(ind$characteristics)) {
        cat(
            &quot;The teacher&#39;s &quot;, 
            ind$characteristics[i],
            &quot; is &quot;, 
            ind$values[i],
            &quot;\n&quot;
        )
    }
}

# Apply method to our S3 object
summary(ind)</code></pre>
<pre><code>## The teacher&#39;s  Age  is  30 
## The teacher&#39;s  Income  is  2.1</code></pre>
</div>
<div id="s4-system" class="section level3">
<h3>S4 system</h3>
<p>The <strong>S4</strong> system introduces a separate function for new <em>class</em> definition.
Instead of simply assigning a class to an existing object, here we create a template for all other objects of the same class.
Not only we define an object’s skeleton, but we define even the default values.
For example:</p>
<pre class="r"><code># Define S4 class
individual_s4 = setClass(
    # Define class name
    &quot;individual_s4&quot;,
    # Define contents
    slots = c(
        characteristics = &quot;character&quot;,
        values = &quot;numeric&quot;
    ),
    # Define default values
    prototype = list(
        characteristics = c(&quot;Age&quot;, &quot;Income&quot;),
        values = c(30, 2.1)
    ),
    # Validity check
    validity = function(object) {
        if (length(object$characteristics) != length(object$values)) {
            return(&quot;The number of supplied values and characteristics do not match&quot;)
        }
        return(TRUE)
    }
)</code></pre>
<p>To create a new object of just created class, we can run:</p>
<pre class="r"><code># Create individual
ind = individual_s4(); ind</code></pre>
<pre><code>## An object of class &quot;individual_s4&quot;
## Slot &quot;characteristics&quot;:
## [1] &quot;Age&quot;    &quot;Income&quot;
## 
## Slot &quot;values&quot;:
## [1] 30.0  2.1</code></pre>
<p>Beware, that previously created methods for <code>summary()</code> function for <strong>S3</strong> class will no longer work on a newly created <strong>S4</strong> object.
<strong>S4</strong> class uses <code>slots</code> instead of default <em>list within list</em> structure seen before, which makes it impossible to call <code>slots</code> using <code>$</code> operator.
We will have to rewrite our method to support <strong>S4</strong> class:</p>
<pre class="r"><code># Add summary method for generic function
summary.individual_s4 = function(ind) {
    for (i in seq_along(ind@characteristics)) {
        cat(
            &quot;Individual&#39;s &quot;, 
            ind@characteristics[i],
            &quot; is &quot;, 
            ind@values[i],
            &quot;\n&quot;
        )
    }
}

# Apply method to our S4 object
summary(ind)</code></pre>
<pre><code>## Individual&#39;s  Age  is  30 
## Individual&#39;s  Income  is  2.1</code></pre>
<p>To call slots of an object we can use either <code>slot()</code> function or an <code>@</code> operator.
You can find some more information in <a href="https://data-flair.training/blogs/object-oriented-programming-in-r/">this blogpost</a>.</p>
</div>
<div id="rc-or-r5-system" class="section level3">
<h3>RC (or R5) system</h3>
<p>As it was previously stated, the main differences between <strong>R5</strong> classes and <strong>S3</strong> or <strong>S4</strong> ones are:</p>
<ul>
<li><strong>R5</strong> objects use message-passing OO</li>
<li><strong>R5</strong> objects are mutable in place</li>
</ul>
<p>To create a new class in <strong>R5</strong> system we can use dedicated function:</p>
<pre class="r"><code># Class creation in R5
individual_r5 = setRefClass(
    # Class name
    &quot;individual_r5&quot;,
    # Fields replace slots in R5
    fields = list(
        characteristics = &quot;character&quot;,
        values = &quot;numeric&quot;
    )
)</code></pre>
<p>Now let’s create a new individual with <strong>R5</strong> system:</p>
<pre class="r"><code># Create new object
ind = individual_r5$new(
    characteristics = c(&quot;Age&quot;, &quot;Income&quot;),
    values = c(30, 2.2)
); ind</code></pre>
<pre><code>## Reference class object of class &quot;individual_r5&quot;
## Field &quot;characteristics&quot;:
## [1] &quot;Age&quot;    &quot;Income&quot;
## Field &quot;values&quot;:
## [1] 30.0  2.2</code></pre>
<p>Because the <strong>R5</strong> respects <code>$</code> operator by default, we would need to rewrite our method for summary, identical to the one made for <strong>S3</strong> class:</p>
<pre class="r"><code># Add summary method for generic function
summary.individual_r5 = function(ind) {
    for (i in seq_along(ind$characteristics)) {
        cat(
            &quot;Individual&#39;s &quot;, 
            ind$characteristics[i],
            &quot; is &quot;, 
            ind$values[i],
            &quot;\n&quot;
        )
    }
}

# Apply method to our R5 object
summary(ind)</code></pre>
<pre><code>## Individual&#39;s  Age  is  30 
## Individual&#39;s  Income  is  2.2</code></pre>
<p>Alternatively, we can define a method directly within the class definition.
To call such methods on object we would need a syntax statement extremely familiar to users of <em>Python</em>:</p>
<pre class="r"><code># Add method to class
individual_r5$methods(
    summarize = function() {
        for (i in seq_along(ind$characteristics)) {
            cat(
                ind$characteristics[i],
                &quot; is &quot;, 
                ind$values[i],
                &quot;\n&quot;
            )
        }
    }
) 

# Apply method
ind$summarize()</code></pre>
<pre><code>## Age  is  30 
## Income  is  2.2</code></pre>
<p>In <strong>R5</strong> there exist some common methods shared by all the objects created with <code>setRefClass()</code> function:</p>
<ul>
<li><code>object$copy()</code>, which creates a copy of an existing object</li>
<li><code>object$filed()</code>, functioning identically to <code>slots()</code> in <strong>S4</strong> for assignment purposes</li>
<li><code>object$import()</code> and <code>object$export()</code>, which allow to coerce objects into different classes</li>
<li><code>object$initFields()</code></li>
<li><code>object$callSuper()</code></li>
</ul>
<p>You can read more about the <strong>R5</strong> system in <a href="http://adv-r.had.co.nz/R5.html">this blogpost</a>.</p>
</div>
<div id="r6-system" class="section level3">
<h3>R6 system</h3>
<p><strong>R6</strong> OOP support is brought into <em>R</em> with a <a href="https://r6.r-lib.org/">separate package</a>.
You can install it by running:</p>
<pre class="r"><code># Install R6 dependencies
install.packages(&quot;R6&quot;)</code></pre>
<p>And then load it into the current environment:</p>
<pre class="r"><code># Load library
library(R6)</code></pre>
<p>The <strong>R6</strong> system bring not only the additional feature similar to the more traditional OOP, but are lighter as well.
Their implementation avoid some of the issues introduced by <strong>S4</strong> and <strong>R5</strong> (<strong>RC</strong>) systems.
Among the main features authors state:</p>
<ul>
<li>Public and private methods</li>
<li>Active bindings</li>
<li>Inheritance (<em>superclasses</em>) which works across packages</li>
</ul>
<pre class="r"><code># Create individual class in R6 system
individual_r6 = R6Class(
    &quot;individual&quot;, 
    public = list(
        characteristics = NULL,
        values = NULL,
        # Initialisation to perform on object creation
        initialize = function(
            characteristics = NA, 
            values = NA
        ){
            self$characteristics = characteristics
            self$values = values
        }
    )
)</code></pre>
<p>The new objects of a given class are created identically to <strong>R5</strong> system:</p>
<pre class="r"><code># Create new individual
ind = individual_r6$new(
    characteristics = c(&quot;Age&quot;, &quot;Income&quot;),
    values = c(25, 1.5)
); ind</code></pre>
<pre><code>## &lt;individual&gt;
##   Public:
##     characteristics: Age Income
##     clone: function (deep = FALSE) 
##     initialize: function (characteristics = NA, values = NA) 
##     values: 25 1.5</code></pre>
<p><strong>R6</strong> keeps support for common <code>$</code> operator, which allows to declare methods as before:</p>
<pre class="r"><code># Add summary method for generic function
summary.individual_r6 = function(ind) {
    for (i in seq_along(ind$characteristics)) {
        cat(
            &quot;Individual&#39;s &quot;, 
            ind$characteristics[i],
            &quot; is &quot;, 
            ind$values[i],
            &quot;\n&quot;
        )
    }
}

# Apply method to our R6 object
summary(ind)</code></pre>
<pre><code>## Individual&#39;s  Age  is  25 
## Individual&#39;s  Income  is  1.5</code></pre>
<p>Alternatively it’s possible to define active fields within our class, which execute a function when a field is called.
But it’s probably best to explore all those additional functionalities of <strong>R6</strong> system from <a href="https://r6.r-lib.org/articles/Introduction.html">more reliable sources</a>.</p>
</div>
</div>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/programming" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Programming</a>
   </li>
  
   <li class="list">
     <a href="/tags/r" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">R</a>
   </li>
  
   <li class="list">
     <a href="/tags/oop" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">OOP</a>
   </li>
  
   <li class="list">
     <a href="/tags/objects" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Objects</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/post/2022-02-11-package-documentation-in-r/">Package documentation in R</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-10-tests-in-r/">Tests in  R</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-08-python-alongside-r/">Python alongside R</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-07-latex-and-r/">LaTeX and R</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-05-stocks-with-r/">Financial market analysis with R</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-04-bibliometrix/">Bibliometrix</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2021-12-27-rstudio-or-vs-code/">RStudio or VS Code</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-06-thinkpad-x220-and-pwm/">ThinkPad X220 and PWM</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-03-pass/">`Pass` for password management</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-02-01-self-hosting/">Self-hosting</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2022-01-29-onlykey-for-linux/">OnlyKey for Linux login</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2021-08-31-website-p3/">Building a website (part 3)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2021-08-29-website-p2/">Building a website (part 2)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/2021-08-28-website/">Building a website (part 1)</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://nikitagusarov.github.io/" >
    &copy;  Nikita Gusarov 2023 
  </a>
    <div>







<a href="https://linkedin.com/in/nikitagusarov" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/nikitagusarov" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://gitlab.com/nikitagusarov" target="_blank" class="link-transition gitlab link dib z-999 pt3 pt0-l mr1" title="Gitlab link" rel="noopener" aria-label="follow on Gitlab——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M29.782 199.732L256 493.714 8.074 309.699c-6.856-5.142-9.712-13.996-7.141-21.993l28.849-87.974zm75.405-174.806c-3.142-8.854-15.709-8.854-18.851 0L29.782 199.732h131.961L105.187 24.926zm56.556 174.806L256 493.714l94.257-293.982H161.743zm349.324 87.974l-28.849-87.974L256 493.714l247.926-184.015c6.855-5.142 9.711-13.996 7.141-21.993zm-85.404-262.78c-3.142-8.854-15.709-8.854-18.851 0l-56.555 174.806h131.961L425.663 24.926z"></path></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






</div>
  </div>
</footer>

  </body>
</html>
